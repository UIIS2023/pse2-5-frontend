<svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow" viewBox="0 0 16 16">
    <path fill-rule="evenodd"
      d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z" />
  </symbol>
  <symbol id="chat" fill="currentColor">
    <path
      d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
    <path
      d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z" />
  </symbol>

  <symbol id="map" fill="currentColor">
    <path fill-rule="evenodd"
      d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103M10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8zm-6-.8V1.11l-4 .8v12.98z" />
  </symbol>

  <symbol id="circle" viewBox="0 0 16 16">
    <circle cx="8" cy="8" r="2" />
  </symbol>

  <symbol id="notifictionBell" viewBox="0 0 16 16">
    <path
      d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z" />
  </symbol>

  <symbol id="profile" viewBox="0 0 16 16">
    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
    <path
      d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" />
  </symbol>
  <symbol id="shoppingCart" viewBox="0 0 16 16">
    <path
      d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
  </symbol>
</svg>

<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light navbar-wrapper">
  <div class="container-fluid">
    <a class="navbar-brand" [routerLink]="['home']">
      <img class="logo" src="../../../../assets/images/logo1.png" alt="#" />
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarNavDropdown" *ngIf="isOnLandingPage()">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" [routerLink]="['home']">
            <svg width="40" height="40">
              <use xlink:href="#arrow" />
            </svg>
          </a>
        </li>
      </ul>
    </div>
    <div class="collapse navbar-collapse" id="navbarNavDropdown" *ngIf="!isOnLandingPage()">
      <ul class="navbar-nav" *ngIf="user && user.username !== ''">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Tours
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['tours']">
              <a class="dropdown-item">Tours</a>
            </li>
            <li *ngIf="user && user.role === 'author'" [routerLink]="['tour']">
              <a class="dropdown-item">Tours</a>
            </li>
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['bought-tours']">
              <a class="dropdown-item">Bought tours</a>
            </li>
            <li *ngIf="user && (user.role === 'tourist' || user.role === 'author')"
              [routerLink]="['reported-problems']">
              <a class="dropdown-item">Tour problems</a>
            </li>
            <li *ngIf="user && user.role === 'administrator'" [routerLink]="['tourProblems']">
              <a class="dropdown-item">Tour problems</a>
            </li>
            <li *ngIf="user && user.role === 'author'" [routerLink]="['bundle-view']">
              <a class="dropdown-item">Bundles</a>
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown" *ngIf="user && user.username !== ''">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Social
          </a>
          <ul class="dropdown-menu" aria-labelledby="socialDropdown">
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['club']">
              <a class="dropdown-item">Clubs</a>
            </li>
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['userProfiles']">
              <a class="dropdown-item">People</a>
            </li>
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['blogs-overview']">
              <a class="dropdown-item">Blog</a>
            </li>
            <li [routerLink]="['about-us']">
              <a class="dropdown-item">About us</a>
            </li>
            <li [routerLink]="['frequent-questions']">
              <a class="dropdown-item">FAQ</a>
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown" *ngIf="user && user.username !== ''">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Encounters
          </a>
          <ul class="dropdown-menu" aria-labelledby="encountersDropdown">
            <li *ngIf="user && user.role === 'administrator'" [routerLink]="['challenges/-1000']">
              <a class="dropdown-item">Challenges</a>
            </li>
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['challenges-view']">
              <a class="dropdown-item">Explore</a>
            </li>
            <li *ngIf="user && user.role === 'tourist' && (userxp && userxp.level>9)" [routerLink]="['challenges/-1000']">
              <a class="dropdown-item">Create challenges</a>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto d-flex align-items-center justify-content-center">
        <li class="nav-item">

          <a class="nav-link" aria-current="page" *ngIf="user && (user.role === 'tourist')"
            [routerLink]="['cart-items']">
            <svg width="25" height="25" >
              <use xlink:href="#shoppingCart">
              </use>
            </svg>
            <span *ngIf="cartSize > 0" class="top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{cartSize}}
            </span>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && user.role == 'tourist'"></div>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" *ngIf="user && user.username !== '' && user.role !== 'administrator'"
            [routerLink]="['messages']">
            <svg width="20" height="20">
              <use xlink:href="#chat" />
            </svg>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item">
          <div class="notifications d-inline-block" *ngIf="user && user.role !== 'administrator'">
            <div class="dropdown d-inline-block nav-btn" *ngIf="user && user.username !== ''">
              <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
                aria-expanded="false">
                <svg class="notifiction-bell" width="20" height="20">
                  <use xlink:href="#notifictionBell" />
                </svg>
              </a>

              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuLink" id="notifications-ul"></ul>
            </div>
          </div>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" *ngIf="user && user.username !== '' && user.role !== 'administrator'"
            [routerLink]="['map-view']">
            <svg width="25" height="25">
              <use xlink:href="#map" />
            </svg>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item dropdown" *ngIf="user && user.username !== ''">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <svg class="profile-icon" width="25" height="25">
              <use xlink:href="#profile" />
            </svg>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['myProfile']">
              <a class="dropdown-item">My profile</a>
            </li>
            <li *ngIf="user && user.username !== ''" (click)="onLogout()">
              <a class="dropdown-item">Logout</a>
            </li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" *ngIf="user && user.username === ''" [routerLink]="['login']">
            Login
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
