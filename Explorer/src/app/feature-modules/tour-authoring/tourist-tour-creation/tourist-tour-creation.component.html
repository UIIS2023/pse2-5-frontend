<div class="main-container">
  <div class="centered-container">
    <h1><b>Make your own tour</b></h1>
    <form class="tourCreationForm" [formGroup]="tourForm">
      <div class="inputFieldContainer">
        <div class="inputFieldContainer--row">
          <mat-form-field class="form-field">
            <mat-label>Name:</mat-label>
            <input matInput type="text" formControlName="name" />
          </mat-form-field>
        </div>
      </div>
      <label>Key points: </label>
      <button mat-button (click)="addPublicKeyPoint()">
        <mat-icon>add</mat-icon>
        Select public key point
      </button>
      <xp-map class="map" [mapId]="'tourist-tour-form-map'" (removeKeyPointEmitter)="getTour(6)"></xp-map>

      <!-- <div>
          <mat-list *ngFor="let kp of publicKeyPoints">
              <div class="list">
              <mat-list-item>
                  <button mat-button (click)="removeKeypointFromList(kp.id || 0)">
                      <mat-icon>highlight_off</mat-icon>
                  </button>
                  <div class="list-item-string">{{kp.name}}</div>
              </mat-list-item>
              </div>
          </mat-list>
      </div> -->
      <div *ngIf="publicKeyPoints.length !== 0">
          <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Recommended tours  -  contain selected keypoints
                </mat-panel-title>
              </mat-expansion-panel-header>

              <div>
                <div class="recommended">
                  <section class="container" [ngStyle]="{'maxWidth': '1100px'}">
                      <div class="card__container swiper mySwiper" [ngStyle]="{'maxWidth': '1200px'}" #container>
                          <div class="left" *ngIf="totalPages > 1" (click)="currentPage != 1 && changePage(-1)" [ngClass]="{'disabled':currentPage === 1}"><i class="ri-arrow-left-s-line"></i></div>
              
                          <div class="card__content" [ngClass]="{'w-100': totalPages === 1}" [ngStyle]="{'maxWidth': '1200px'}">
                              <div class="swiper-wrapper" [ngStyle]="{'width': overflowWidth, 'left': pagePosition, 'transition': 'left 0.5s ease-in-out'}">
                                  <article class="card__article swiper-slide" *ngFor="let t of recommendedTours" (click)="tourShow(t.id || 0)">
                                      <!-- <div class="card__image">
                                          <img src={{t.image}} alt="image" class="card_img">
                                      </div> -->
              
                                      <div class="card__data">
                                          <h3 class="card__name mt-3 mb-4">{{t.name}}</h3>
                                          <p class="card__description">
                                              {{t.description}}
                                          </p>
                                      </div>
                                  </article>
                              </div>
                          </div>
              
                          <div class="right" *ngIf="totalPages > 1" (click)="currentPage < totalPages && changePage(+1)" [ngClass]="{'disabled':currentPage === totalPages}"><i class="ri-arrow-right-s-line"></i></div>
                      </div>
                  </section>
                </div>
              </div>
          </mat-expansion-panel>
      </div>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Transportation methods
          </mat-panel-title>
          <mat-panel-description>
            Select transportation methods
            <mat-icon>directions_car</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
      
        <div class="p-3">
          <div class="row">
            <div class="col-4">
              <div class="form-check form-check-inline">
                <mat-checkbox class="example-margin" (change)="toggleFieldWalk()" [checked]="isWalkChecked">
                  <mat-icon>directions_walk</mat-icon> Walking
                </mat-checkbox>
                <div *ngIf="showFieldWalk" class="mt-2">
                  <!--<input type="number"
                  class="form-control-sm" placeholder="Estimated time in minutes..."
                  formControlName="walkTime">-->
                  <p>{{ walkTimeMin }} min</p>
                </div>
              </div>
            </div>
      
            <div class="col-4">
              <div class="form-check form-check-inline">
                <mat-checkbox class="example-margin" (change)="toggleFieldBicycle()" [checked]="isBicycleChecked">
                  <mat-icon>directions_bike</mat-icon> Bicycle
                </mat-checkbox>
                <div *ngIf="showFieldBicycle" class="mt-2">
                  <!--<input type="number" 
                  formControlName="bicycleTime"
                  class="form-control-sm" placeholder="Estimated time in minutes...">-->
                  <p>{{ bicycleTimeMin }} min</p>
                </div>
              </div>
            </div>
      
            <div class="col-4">
              <div class="form-check form-check-inline">
                <mat-checkbox class="example-margin" (change)="toggleFieldCar()" [checked]="isCarChecked">
                  <mat-icon>directions_car</mat-icon> Car
                </mat-checkbox>
                <div *ngIf="showFieldCar" class="mt-2">
                  <!--<input type="number" 
                  class="form-control-sm" placeholder="Estimated time in minutes..."
                  formControlName="carTime">-->
                  <p>{{ carTimeMin }} min</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>


      <div class="buttons-container">
        <button class="custom-button" mat-raised-button>Cancel</button>
        <button *ngIf="!editMode" class="custom-button" (click)="createTour()" type="submit" mat-raised-button>
          Create
        </button>
        <button *ngIf="editMode" class="custom-button" (click)="updadeTour()" type="submit" mat-raised-button>
          Save
        </button>
      </div>
    </form>
  </div>
</div>
